!function(e){function t(t){for(var o,c,l=t[0],s=t[1],u=t[2],f=0,h=[];f<l.length;f++)c=l[f],r[c]&&h.push(r[c][0]),r[c]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o]);for(a&&a(t);h.length;)h.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],o=!0,l=1;l<n.length;l++){var s=n[l];0!==r[s]&&(o=!1)}o&&(i.splice(t--,1),e=c(c.s=n[0]))}return e}var o={},r={0:0},i=[];function c(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=o,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)c.d(n,o,function(t){return e[t]}.bind(null,o));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="";var l=window.webpackJsonp=window.webpackJsonp||[],s=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var a=s;i.push([0,1]),n()}([function(e,t,n){e.exports=n(4)},,function(e,t,n){},,function(e,t,n){"use strict";n.r(t);n(1),n(2);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var s=function(e){function t(e,n){var r,l,s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l=this,r=!(s=i(t).call(this,e))||"object"!==o(s)&&"function"!=typeof s?c(l):s,function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(c(r),"game",void 0),r}var n,s,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,Phaser.Scene),n=t,(s=[{key:"preload",value:function(){}},{key:"setTimerEvent",value:function(e,t,n,o){return this.time.delayedCall(Phaser.Math.Between(e,t),n,o||[],this)}}])&&r(n.prototype,s),u&&r(n,u),t}();function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function f(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var y,d=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),f(this,h(t).call(this,"BootScene"))}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,s),n=t,(o=[{key:"preload",value:function(){this.load.bitmapFont("arcade","./assets/fonts/arcade.png","./assets/fonts/arcade.xml"),this.load.image("flag","./assets/flag.png"),this.load.image("mine","./assets/mine.png")}},{key:"init",value:function(){}},{key:"create",value:function(){console.info("BootScene - create()"),this.scene.start("TitleScene",{})}}])&&a(n.prototype,o),r&&a(n,r),t}(),b={type:Phaser.AUTO,scale:{parent:"game-container",mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH,width:320,height:180},disableContextMenu:!0,render:{pixelArt:!0}},m={difficulty:{easy:{bombs:25,cellSize:20},medium:{bombs:50,cellSize:20},hard:{bombs:100,cellSize:10}}};function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function w(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}!function(e){e.EASY="easy",e.MEDIUM="medium",e.HARD="hard"}(y||(y={}));var _=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),w(this,S(t).call(this,"TitleScene"))}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(t,s),n=t,(o=[{key:"create",value:function(){var e=this;console.info("TitleScene - create()"),this.add.bitmapText(10,10,"arcade","Mine sweeper",16),this.add.rectangle(10,50,80,40,3381555,1).setOrigin(0).setInteractive({cursor:"pointer"}).on("pointerup",function(){return e.scene.start("GameScene",{difficulty:y.EASY})},this),this.add.bitmapText(20,60,"arcade","easy",16),this.add.rectangle(100,50,115,40,3355545,1).setOrigin(0).setInteractive({cursor:"pointer"}).on("pointerup",function(){return e.scene.start("GameScene",{difficulty:y.MEDIUM})},this),this.add.bitmapText(110,60,"arcade","medium",16),this.add.rectangle(225,50,80,40,10040115,1).setOrigin(0).setInteractive({cursor:"pointer"}).on("pointerup",function(){return e.scene.start("GameScene",{difficulty:y.HARD})},this),this.add.bitmapText(235,60,"arcade","hard",16),this.add.rectangle(215,150,100,20,3355443,1).setOrigin(0).setInteractive({cursor:"pointer"}).on("pointerup",function(){e.scale.isFullscreen?e.scale.stopFullscreen():(e.scale.startFullscreen(),screen.orientation.lock("landscape-primary"))},this),this.add.bitmapText(225,155,"arcade","fullscreen",8)}}])&&v(n.prototype,o),r&&v(n,r),t}(),j=[0,6750054,6711039,16777062,6750207,16737894];function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var z=function(e){function t(e,n,o,r,i){var c,l,s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l=this,c=!(s=T(t).call(this,e,n,o,i))||"object"!==x(s)&&"function"!=typeof s?E(l):s,k(E(c),"index",void 0),k(E(c),"hasBomb",!1),k(E(c),"flagged",!1),k(E(c),"flipped",!1),k(E(c),"neighbourBombs",0),k(E(c),"icon",void 0),k(E(c),"number",void 0),k(E(c),"size",void 0),c.size=r,c.setOrigin(0),c.setInteractive({cursor:"pointer"}),c.input.hitArea=new Phaser.Geom.Rectangle(0,0,r,r),c.on("pointerdown",c.clickHandler,E(c)),c}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(t,Phaser.GameObjects.Image),n=t,(o=[{key:"flipCell",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.off("pointerdown"),this.removeInteractive(),this.flipped=!0,this.flagged&&this.icon.destroy(),this.hasBomb?(this.icon=this.scene.add.image(this.x+this.size/2,this.y+this.size/2,"mine").setOrigin(.5).setDepth(5),e&&(this.setTint(16724787),this.scene.events.emit("cell:explode"))):(this.setTint(5592405),this.neighbourBombs?this.number=this.scene.add.bitmapText(this.x+this.size/2,this.y+this.size/2,"arcade",this.neighbourBombs.toString(),8).setOrigin(.5).setTint(j[this.neighbourBombs]).setDepth(5):this.scene.events.emit("cell:empty",this))}},{key:"clickHandler",value:function(e){1===e.buttons?this.flipCell(!0):this.markCell(),this.scene.events.emit("cell:clicked")}},{key:"markCell",value:function(){this.flagged?(this.flagged=!1,this.icon&&this.icon.destroy()):(this.flagged=!0,this.icon=this.scene.add.image(this.x+this.size/2,this.y+this.size/2,"flag").setOrigin(.5).setDepth(5))}}])&&P(n.prototype,o),r&&P(n,r),t}();function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function G(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var A=function(e){function t(e,n){var o,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=!(i=B(t).call(this,"GameScene"))||"object"!==C(i)&&"function"!=typeof i?M(r):i,G(M(o),"renderTexture",void 0),G(M(o),"cellSize",void 0),G(M(o),"cellRowWidth",void 0),G(M(o),"cells",void 0),G(M(o),"gameState","init"),o}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(t,s),n=t,(o=[{key:"create",value:function(e){console.info("GameScene - create(".concat(JSON.stringify(e),")"));var t=m.difficulty[e.difficulty];this.cellSize=t.cellSize,this.cells=[],this.cellRowWidth=this.scale.gameSize.width/this.cellSize,this.renderTexture=this.add.renderTexture(0,0),this.createCellTexture(),this.createPlayfield(),this.createMines(t.bombs),this.bindEvents(),this.gameState="playing"}},{key:"bindEvents",value:function(){var e=this;this.events.on("cell:explode",function(){e.gameState="gameover",e.add.bitmapText(e.scale.gameSize.width/2,20,"arcade","game over",32).setOrigin(.5).setDepth(10),e.add.bitmapText(e.scale.gameSize.width/2,e.scale.gameSize.height-25,"arcade","menu",32).setDepth(10).setOrigin(.5).setInteractive({cursor:"pointer"}).on("pointerdown",function(){return e.scene.start("TitleScene")},e),e.cells.filter(function(e){return e.hasBomb}).forEach(function(e){return e.flipCell()}),e.cells.forEach(function(e){return e.removeInteractive()})},this),this.events.on("cell:empty",function(t){e.openEmptyAreas(t)},this),this.events.on("cell:clicked",function(){console.log("count state here")},this)}},{key:"createPlayfield",value:function(){for(var e=0;e<this.scale.gameSize.height;e+=this.cellSize)for(var t=0;t<this.scale.gameSize.width;t+=this.cellSize)this.add.existing(this.createCell(t,e))}},{key:"createCell",value:function(e,t){var n=new z(this,e,t,this.cellSize,"cell");return n.index=this.cells.length,this.cells.push(n),n}},{key:"createMines",value:function(e){for(var t=this,n=0;n<e;n++){var o=this.cells.filter(function(e){return!e.hasBomb});o[Phaser.Math.Between(0,o.length-1)].hasBomb=!0}this.cells.filter(function(e){return e.hasBomb}).forEach(function(e){t.getCellNeighbours(e).forEach(function(e){return e.neighbourBombs++})})}},{key:"createCellTexture",value:function(){var e=this.add.graphics();e.fillStyle(7829367,1).fillRoundedRect(0,0,this.cellSize,this.cellSize,2).lineStyle(1,0,.2).strokeRoundedRect(0,0,this.cellSize,this.cellSize,2),this.renderTexture.draw(e).saveTexture("cell"),e.destroy()}},{key:"getCellNeighbours",value:function(e){var t=[],n=-1;return(n=e.index-this.cellRowWidth-1)>-1&&n<this.cells.length&&n%this.cellRowWidth<e.index%this.cellRowWidth&&t.push(this.cells[n]),(n=e.index-this.cellRowWidth)>-1&&n<this.cells.length&&t.push(this.cells[n]),(n=e.index-this.cellRowWidth+1)>-1&&n<this.cells.length&&n%this.cellRowWidth>e.index%this.cellRowWidth&&t.push(this.cells[n]),(n=e.index-1)>-1&&n<this.cells.length&&n%this.cellRowWidth<e.index%this.cellRowWidth&&t.push(this.cells[n]),(n=e.index+1)>-1&&n<this.cells.length&&n%this.cellRowWidth>e.index%this.cellRowWidth&&t.push(this.cells[n]),(n=e.index+this.cellRowWidth-1)>-1&&n<this.cells.length&&n%this.cellRowWidth<e.index%this.cellRowWidth&&t.push(this.cells[n]),(n=e.index+this.cellRowWidth)>-1&&n<this.cells.length&&t.push(this.cells[n]),(n=e.index+this.cellRowWidth+1)>-1&&n<this.cells.length&&n%this.cellRowWidth>e.index%this.cellRowWidth&&t.push(this.cells[n]),t}},{key:"openEmptyAreas",value:function(e){for(var t=[e];t.length>0;){var n=t.shift();this.getCellNeighbours(n).forEach(function(e){e.flipped||e.hasBomb||(e.flipCell(),e.neighbourBombs||t.push(e))})}}}])&&W(n.prototype,o),r&&W(n,r),t}();function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(e){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function H(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"KokoGame",function(){return U});var J=new(n(3));J.setMode(0),J.domElement.style.position="absolute",J.domElement.style.right="0px",J.domElement.style.top="0px",document.body.appendChild(J.domElement);var U=function(e){function t(e){var n,o,r,i,c,l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,n=!(r=F(t).call(this,e))||"object"!==D(r)&&"function"!=typeof r?H(o):r,i=H(n),l=!1,(c="debug")in i?Object.defineProperty(i,c,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[c]=l,n.events.on("prestep",function(){J.begin()}),n.events.on("postrender",function(){J.end()}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(t,Phaser.Game),t}();window.onload=function(){var e=new U(b);e.scene.add("BootScene",d,!0),e.scene.add("TitleScene",_,!1),e.scene.add("GameScene",A,!1)}}]);